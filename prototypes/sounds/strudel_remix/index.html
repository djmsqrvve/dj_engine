<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FF7 Main Theme - Strudel Remix</title>
    <style>
      body { margin: 0; background: #111; color: white; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; }
      h1 { padding: 1rem; margin: 0; font-size: 1.2rem; background: #222; }
      strudel-repl { flex: 1; display: block; border: none; }
    </style>
  </head>
  <body>
    <h1>FF7 Main Theme (Algorithmic Remix)</h1>
    
    <!-- We link our local main.js file here -->
    <script type="module" src="/main.js"></script>

    <strudel-repl>
      <!--
// FF7 Main Theme (Algorithmic Remix)
// Generated by Gemini

// 1. Define the core melody pattern (extracted from MIDI)
let melody = note("g5 ~ _ ~ e5 ~ _ ~ _ d5 ~ f5 ~ e5")
  .scale("Minor") 
  
// 2. Apply generative algorithms
stack(
  // The Lead
  melody
    .s("sawtooth")
    .lpf(sine.range(500, 3000).slow(4)) 
    .jux(rev) // Stereo widening
    .sometimesBy(0.2, x => x.add(n(12))) // Occasional octave jumps
    .chunk(4, x => x.fast(2)) // Glitchy speedups
    .delay(0.5).decay(0.5) 
    .clip(1).gain(0.8),

  // A Bassline derived from the melody
  melody.down(12).slow(2)
    .s("square").lpf(800)
    .gain(0.6)
)
      -->
    </strudel-repl>
  </body>
</html>
